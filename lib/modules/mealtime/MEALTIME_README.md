# Mealtime Module

## Overview
The Mealtime Module helps users optimize their eating schedule for better sleep quality by managing meal timing throughout the day. Based on sleep science principles, the module encourages earlier eating patterns and discourages late-night consumption.

## Core Principle
**Eating earlier in the day supports better sleep.** Late-night eating can disrupt sleep quality and circadian rhythms. This module educates users about optimal meal timing and helps them establish healthy eating patterns.

## Key Features

### Standard Mode (Default)
- **3 meals per day** with science-based timing:
  - Breakfast: ~7:00 AM (within 1 hour of waking)
  - Lunch: ~1:00 PM (midday)
  - Dinner: ~5:00 PM (at least 5 hours before bedtime)
- Meal times **automatically adjust** based on user's wake/sleep schedule from settings
- Push notifications remind users when it's time to eat
- Simple, minimal configuration

### Advanced Mode (Customizable)
- **Flexible meal count**: 1-9 meals per day
- **Eating window** (for intermittent fasting):
  - Visual slider to set start and end times
  - Meals automatically space evenly within the window
  - Supports windows from 4-16 hours
- **Color-coded timing feedback**:
  - **Dark Red**: Eating immediately after waking or during sleep hours
  - **Red to Orange**: Suboptimal times (too early/too late)
  - **Light Green**: Optimal meal times
  - **Green**: Best times for eating based on circadian rhythm
- Individual meal adjustments while maintaining overall pattern

## Visual Interface
- **Interactive time slider** showing:
  - 24-hour timeline
  - User's sleep period (shaded)
  - Eating window boundaries (adjustable handles)
  - Meal time markers (draggable points)
  - Color gradient indicating optimal/suboptimal times
- **Real-time feedback** as user adjusts times
- Clear visual of how meals relate to wake/sleep times

## Notifications
- **Meal reminders**: Alerts at meal times (or 15 min before, user choice)
- **Customizable per meal**: Enable/disable notifications for specific meals
- **Module-level override**: Can enable/disable all mealtime notifications independently of global app settings

## Integration with Sleep Data
- Uses user's **target wake time** and **target bed time** from settings
- Automatically recalculates meal times when sleep schedule changes
- Color-coding updates based on current sleep goals
- Tracks meal adherence for correlation with sleep quality

## Educational Component
- Explains why eating timing matters for sleep
- Shows research-backed reasons for avoiding late meals
- Provides tips for maintaining consistent meal times
- Displays how meal timing correlates with user's sleep metrics

## Activity Tracking
- Log whether meals were eaten on time
- Track eating window adherence
- Record deviations and reasons (optional)
- View patterns over time

## Use Cases
1. **Standard User**: Wants simple, effective meal timing - uses 3-meal default
2. **Intermittent Faster**: Sets 8-hour eating window, adjusts meal count
3. **Shift Worker**: Customizes all meal times to match unusual schedule
4. **Performance Optimizer**: Fine-tunes meal timing based on sleep quality correlations

## Benefits for Sleep
- Aligns eating with circadian rhythm
- Prevents late-night digestion interference
- Establishes routine that supports consistent sleep schedule
- Reduces nighttime blood sugar fluctuations
- Supports natural melatonin production timing

## Future Enhancements
- Meal composition suggestions (what to eat when)
- Integration with nutrition module for comprehensive guidance
- Meal prep reminders based on schedule
- Social eating accommodation (flexible dinner times for social events)
- Gradual schedule adjustment (slow transition to new times)
